"use strict";(self.webpackChunknelverse=self.webpackChunknelverse||[]).push([[37],{28453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>l});var r=s(96540);const n={},i=r.createContext(n);function a(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),r.createElement(i.Provider,{value:t},e.children)}},78478:(e,t,s)=>{s.d(t,{A:()=>i});s(96540);var r=s(92303),n=s(74848);function i({children:e,fallback:t}){return(0,r.A)()?(0,n.jsx)(n.Fragment,{children:e?.()}):t??null}},81335:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>g,frontMatter:()=>d,metadata:()=>r,toc:()=>x});const r=JSON.parse('{"id":"probability/abtest","title":"A/B Test Trial Simulation","description":"This simulator shows how real A/B tests progress over time, with each new participant adding noise and uncertainty.","source":"@site/labs/probability/abtest.mdx","sourceDirName":"probability","slug":"/probability/abtest","permalink":"/labs/probability/abtest","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"A/B Test Trial Simulation","slug":"abtest"},"sidebar":"defaultSidebar","previous":{"title":"Probability","permalink":"/labs/category/probability"},"next":{"title":"Gacha Calculator","permalink":"/labs/probability/gacha-calculator"}}');var n=s(74848),i=s(28453),a=s(78478),l=s(96540);function o(){const e=(0,l.useRef)(null),t=(0,l.useRef)(null),[r,i]=(0,l.useState)(20),[a,o]=(0,l.useState)(20),[d,c]=(0,l.useState)(30),[h,x]=(0,l.useState)(20),u=(e,t,s,r)=>{const n=[],i=[],a=[];let l=0,o=0,d=0,c=0;for(let h=1;h<=500;h++){const x=e/100,u=s/100,j=t/100,m=r/100,f=Math.max(0,Math.min(1,x*(1+(Math.random()-.5)*j*2))),v=Math.max(0,Math.min(1,u*(1+(Math.random()-.5)*m*2))),y=Math.random()<f?1:0,b=Math.random()<v?1:0;l+=y,o+=1-y,d+=b,c+=1-b;const T=g(l,o,d,c),w=p(l,o,d,c);n.push(h),i.push(Math.log10(T)),a.push(w)}return{trials:n,logP:i,oddsRatio:a}},g=(e,t,s,r)=>{const n=e+t,i=s+r,a=e+s,l=t+r,o=n+i;if(0===n||0===i||0===a||0===l)return 1;const d=n*a/o,c=n*l/o,h=i*a/o,x=i*l/o,u=Math.pow(e-d,2)/d+Math.pow(t-c,2)/c+Math.pow(s-h,2)/h+Math.pow(r-x,2)/x;return u<.1?1:u>10?.001:Math.max(.001,Math.exp(-u/2))},p=(e,t,s,r)=>0===e||0===r?0:0===t||0===s?1/0:s*t/(e*r),j=(e,t)=>e<10?.01:e<25?.02:e<50?.03:e<100?.04:.05,m=(0,l.useMemo)((()=>u(r,a,d,h)),[r,a,d,h]),f=(0,l.useMemo)((()=>{const e=[];for(let t=0;t<100;t++){const t=u(r,a,d,h);let s=null,n=0;for(let e=0;e<t.trials.length;e++){const r=Math.pow(10,t.logP[e]);if(r<=j(t.trials[e])){if(n++,n>=10){s=t.trials[e];break}}else n=0}s&&e.push(s)}return e}),[r,a,d,h]),v=(0,l.useMemo)((()=>{const e=[{x:m.trials,y:m.logP,type:"scatter",mode:"lines",name:"-Log\u2081\u2080(p-value)",line:{color:"#3498db",width:2},hovertemplate:"Trials: %{x}<br>-Log\u2081\u2080(p-value): %{y:.3f}<extra></extra>",yaxis:"y"},{x:m.trials,y:m.oddsRatio,type:"scatter",mode:"lines",name:"Odds Ratio",line:{color:"#e74c3c",width:2},hovertemplate:"Trials: %{x}<br>Odds Ratio: %{y:.3f}<extra></extra>",yaxis:"y2"}],t=[],s=[];for(let r=0;r<m.trials.length;r++){const e=m.trials[r],n=j(e);t.push(e),s.push(Math.log10(n))}return e.push({x:t,y:s,type:"scatter",mode:"lines",name:"Doubt-Adjusted Threshold",line:{color:"#e67e22",width:2,dash:"dot"},hovertemplate:"Trials: %{x}<br>Adjusted Threshold: %{y:.3f}<extra></extra>",yaxis:"y"}),e}),[m]);(0,l.useEffect)((()=>{if(!e.current||0===v.length)return;s(84708).newPlot(e.current,v,{title:{text:"Trial Progression: P-value and Odds Ratio Evolution",font:{size:16}},xaxis:{title:{text:"Number of Trials"},type:"linear"},yaxis:{title:{text:"-Log\u2081\u2080(p-value)"},type:"linear",side:"left"},yaxis2:{title:{text:"Odds Ratio"},type:"linear",side:"right",overlaying:"y"},margin:{t:60,r:50,b:60,l:50},showlegend:!0,legend:{x:.02,y:.98,bgcolor:"rgba(255,255,255,0.8)",bordercolor:"rgba(0,0,0,0.2)",borderwidth:1},shapes:[{type:"rect",xref:"paper",yref:"y",x0:0,x1:1,y0:-3,y1:-1.3,fillcolor:"rgba(46, 204, 113, 0.1)",line:{width:0},layer:"below"}],annotations:[{x:.9,y:-1.65,xref:"paper",yref:"y",text:"Significant Region",showarrow:!1,font:{size:12,color:"rgba(46, 204, 113, 0.8)"},bgcolor:"rgba(255, 255, 255, 0.8)",bordercolor:"rgba(46, 204, 113, 0.3)",borderwidth:1}]},{responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["pan2d","lasso2d","select2d"]})}),[v]),(0,l.useEffect)((()=>{if(!t.current||0===f.length)return;const e=s(84708),r=[{x:f,type:"histogram",name:"Trials to Significance",marker:{color:"#3498db",opacity:.7},nbinsx:50,histnorm:"probability density"}],n={title:{text:`Distribution of Trials to Significance (${f.length} simulations)`,font:{size:16}},xaxis:{title:{text:"Trials to Significance"},type:"linear"},margin:{t:60,r:50,b:60,l:50},showlegend:!1,height:500};e.newPlot(t.current,r,n,{responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["pan2d","lasso2d","select2d"]})}),[f]);const y=(0,l.useMemo)((()=>{const e=f.length>0?f.reduce(((e,t)=>e+t),0)/f.length:null,t=f.length>0?[...f].sort(((e,t)=>e-t))[Math.floor(f.length/2)]:null,s=f.length>0?Math.min(...f):null,n=f.length>0?Math.max(...f):null;return{meanTrials:e,medianTrials:t,minTrials:s,maxTrials:n,numSimulations:f.length,baseRate:r,targetRate:d,improvement:(d-r)/r*100}}),[f,r,d]);return(0,n.jsxs)("div",{style:{padding:"20px"},children:[(0,n.jsx)("h3",{children:"A/B Test Statistical Significance Calculator"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",marginBottom:"20px",padding:"15px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"8px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:"Control Group (A)"}),(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsxs)("label",{children:["Base Effect: ",r,"%"]}),(0,n.jsx)("input",{type:"range",min:"1",max:"100",step:"1",value:r,onChange:e=>i(parseInt(e.target.value)),style:{width:"100%"}}),(0,n.jsx)("small",{children:"True conversion rate for control group"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{children:["Base Std: ",a,"%"]}),(0,n.jsx)("input",{type:"range",min:"10",max:"200",step:"1",value:a,onChange:e=>o(parseInt(e.target.value)),style:{width:"100%"}}),(0,n.jsx)("small",{children:"Standard deviation as % of base effect (multiplicative)"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{children:"Treatment Group (B)"}),(0,n.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,n.jsxs)("label",{children:["Target Effect: ",d,"%"]}),(0,n.jsx)("input",{type:"range",min:"1",max:"100",step:"1",value:d,onChange:e=>c(parseInt(e.target.value)),style:{width:"100%"}}),(0,n.jsx)("small",{children:"True conversion rate for treatment group"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{children:["Target Std: ",h,"%"]}),(0,n.jsx)("input",{type:"range",min:"10",max:"200",step:"1",value:h,onChange:e=>x(parseInt(e.target.value)),style:{width:"100%"}}),(0,n.jsx)("small",{children:"Standard deviation as % of target effect (multiplicative)"})]})]})]}),(0,n.jsx)("div",{ref:e,style:{width:"100%",height:"500px"}}),(0,n.jsxs)("div",{style:{marginTop:"20px"},children:[(0,n.jsx)("h4",{children:"Monte Carlo Distribution: Trials to Significance"}),(0,n.jsx)("div",{ref:t,style:{width:"100%",height:"500px"}})]}),(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"15px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"8px"},children:[(0,n.jsx)("h4",{children:"Key Statistics"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Control (A):"})," ",y.baseRate,"% \xb1 ",a*y.baseRate/100,"%"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Treatment (B):"})," ",y.targetRate,"% \xb1 ",h*y.targetRate/100,"%"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"True Improvement:"})," ",y.improvement.toFixed(1),"%"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Mean Trials:"})," ",y.meanTrials?y.meanTrials.toFixed(0):"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Median Trials:"})," ",y.medianTrials?y.medianTrials.toFixed(0):"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Range:"})," ",y.minTrials?y.minTrials.toFixed(0):"N/A"," - ",y.maxTrials?y.maxTrials.toFixed(0):"N/A"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Simulations:"})," ",y.numSimulations]})]})]})]}),(0,n.jsxs)("div",{style:{marginTop:"20px",padding:"15px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"8px"},children:[(0,n.jsx)("h4",{children:"How to Read This Chart"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Doubt Index:"}),' Early significance is heavily discounted due to the "luck factor." The doubt-adjusted threshold starts extremely strict (requiring p < 0.01 for first 10 trials) and gradually relaxes to standard (p < 0.05) after 100 trials. Significance is only confirmed after 10 consecutive trials below the adjusted threshold.']}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Monte Carlo Simulation:"})," The histogram shows the distribution of trials needed to reach significance across 100 independent simulation runs. This reveals the variability in how long it takes to detect the true effect, accounting for the randomness inherent in real A/B tests."]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Interpretation:"})," The top chart shows one example simulation run, while the histogram shows the full distribution. High variance makes it harder to detect true effects, requiring more trials for significance."]})]})]})}const d={title:"A/B Test Trial Simulation",slug:"abtest"},c="A/B Test Trial Simulation",h={},x=[{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"E-commerce A/B Test",id:"e-commerce-ab-test",level:3},{value:"Email Marketing Test",id:"email-marketing-test",level:3},{value:"Landing Page Test",id:"landing-page-test",level:3}];function u(e){const t={h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:s}=t;return s||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"ab-test-trial-simulation",children:"A/B Test Trial Simulation"})}),"\n",(0,n.jsxs)(t.p,{children:["This simulator shows how ",(0,n.jsx)(t.strong,{children:"real A/B tests progress"})," over time, with each new participant adding noise and uncertainty."]}),"\n",(0,n.jsxs)(t.p,{children:["Unlike static calculations, this demonstrates the ",(0,n.jsx)(t.strong,{children:"actual trial experience"})," where p-values start at 1 (no evidence) and gradually decrease as evidence accumulates."]}),"\n",(0,n.jsxs)(s,{children:[(0,n.jsx)("summary",{children:"Understanding Trial Progression"}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"The Real Problem"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Static calculations"})," assume perfect knowledge"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Real trials"})," have variance and noise"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Each participant"})," adds uncertainty"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"P-values fluctuate"})," as data accumulates"]}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"True Effects vs. Observed Effects"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"True Effect"}),": The actual underlying difference (e.g., 2% vs 3% conversion)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Observed Effect"}),": What you measure (e.g., 1.8-2.2% vs 2.7-3.3% due to variance)"]}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Variance Impact"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Low Variance"}),": Quick detection of true effects"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"High Variance"}),": Harder to detect true effects, requires more trials"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"No Variance"}),": Perfect detection immediately (unrealistic)"]}),"\n"]})]}),"\n",(0,n.jsxs)(s,{children:[(0,n.jsx)("summary",{children:"How the Simulation Works"}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Parameters"})}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Base Effect"}),": Control group's true effect (e.g., 20)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Base Std"}),": Standard deviation as % of base effect (e.g., 20% = \xb120% of 20 = 16-24)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Target Effect"}),": Treatment group's true effect (e.g., 30)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Target Std"}),": Standard deviation as % of target effect (e.g., 20% = \xb120% of 30 = 24-36)"]}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Simulation Process"})}),(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Start at p=1"})," (no evidence yet)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"For each trial"}),": Simulate one observation for each group with variance"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Accumulate data"}),": Keep running totals of successes/failures"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Calculate p-value"}),": Use chi-square test on accumulated data"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Calculate odds ratio"}),": From accumulated data"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Plot progression"}),": Show how p-value and odds ratio evolve"]}),"\n"]})]}),"\n",(0,n.jsxs)(s,{children:[(0,n.jsx)("summary",{children:"Chart Interpretation"}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Axes"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"X axis"}),": Trials - Number of runs accumulated"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Left Y-axis"}),": -Log\u2081\u2080(p-value) - lower means more significant"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Right Y-axis"}),": Odds Ratio - values > 1 favor treatment"]}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Lines"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Blue line"}),": P-value evolution (starts at p=1, becomes significant when crossing threshold)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Red line"}),": Observed odds ratio (fluctuates due to variance)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Gray dashed line"}),": Standard significance threshold (p=0.05)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Orange dotted line"}),": Doubt-adjusted threshold (stricter early, standard later)"]}),"\n"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Key Insights"})}),(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"P-value starts at 1"})," (no evidence)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Gradual decrease"})," as evidence accumulates"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"High variance"})," makes detection harder"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Odds ratio fluctuates"})," around true value"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Doubt index"})," discounts early significance due to luck factor"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Sustained evidence"})," required for confirmation (5 consecutive trials)"]}),"\n"]})]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(a.A,{children:()=>(0,n.jsx)(o,{})}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsx)(t.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,n.jsx)(t.h3,{id:"e-commerce-ab-test",children:"E-commerce A/B Test"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control"}),": 20% conversion \xb1 20% variance (16-24% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Treatment"}),": 30% conversion \xb1 20% variance (24-36% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Result"}),": May take 200-500 trials to detect significance"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"email-marketing-test",children:"Email Marketing Test"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control"}),": 20% open rate \xb1 10% variance (18-22% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Treatment"}),": 25% open rate \xb1 10% variance (22.5-27.5% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Result"}),": May take 100-300 trials to detect significance"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"landing-page-test",children:"Landing Page Test"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Control"}),": 10% conversion \xb1 30% variance (7-13% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Treatment"}),": 20% conversion \xb1 30% variance (14-26% range)"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.strong,{children:"Result"}),": May take 500-1000 trials to detect significance"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"This approach provides a realistic view of how A/B tests actually work in practice, helping you understand the uncertainty and variance inherent in real-world experimentation."})]})}function g(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(u,{...e})}):u(e)}}}]);